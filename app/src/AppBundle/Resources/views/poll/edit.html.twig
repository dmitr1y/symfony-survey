{% extends '@App/layout.html.twig' %}

{% block body %}
    <h1>{{ poll.name }} edit</h1>

    {% form_theme edit_form '@App/collections/main.collection.html.twig' %}
    {% form_theme edit_form.questions '@App/collections/questions.collection.html.twig' %}

    <div class="col col-md">
        {{ form_start(edit_form) }}
        {{ form_widget(edit_form) }}
        <div class="row">
            {{ form_row(edit_form.questions) }}
        </div>
        <div class="form-group">
        <input class="btn btn-info" type="submit" value="Edit"/>
        </div>
        {{ form_end(edit_form) }}
    </div>
    {#{{ form_start(delete_form) }}#}
    {#<input type="submit" value="Delete">#}
    {#{{ form_end(delete_form) }}#}
{% endblock %}

{% block js_scripts %}
    <script src="{{ asset('bundles/app/js/jquery.collection.js') }}"></script>
    <script type="text/javascript">
        $('.test_questions').collection({
            add: '<a href="#" class="btn btn-info m-1"><i class="fas fa-plus"></i>Add question</a>',
            remove: '<a href="#" class="btn btn-danger m-1"><i class="fas fa-trash"></i></a>',
            allow_up: false,
            allow_down: false,
            prefix: 'parent',
            children: [{
                selector: '.questions_item',
                prefix: 'child',
                add: '<a href="#" class="btn btn-info m-1"><i class="fas fa-plus"></i>Add question item</a>',
                remove: '<a href="#" class="btn btn-danger m-1"><i class="fas fa-trash"></i></a>',
                duplicate: '<a href="#" class="btn btn-info m-1"><i class="fas fa-copy"></i></a>',
                allow_up: false,
                allow_down: false,
                allow_duplicate: true,
            }],
        });
    </script>
{% endblock %}
